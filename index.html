<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head profile="http://vliuatenphasedotcom.github.io/">

    <link rel="icon"
      type="image/ico" 
      href="images/drought_icon.ico">
    <meta charset="UTF-8">
    <title>BUT THE DROUGHT CAME BACK? THE VERY NEXT YEAR!</title>
    <meta name="description" content="Earlier this month, California Governor, Jerry Brown, issued new directives which aim to reduce water consumption which includes an unprecedented mandatory 25% cut in urban water use. These measures are intended to address the growing concerns and threats of the sustained drought over the last couple of years. As proud Californians working for a renewable energy technology company, we are deeply concerned with sustainable living practices which will impact our friends and family as well as our posterity. As a result, we are very passionate about gathering insights into this topic which may lead to some innovative solutions that could help address this problem." />

    <!-- ADD Libraries-->
    <script src="libs/d3/d3.min.js" charset="utf-8"></script>
    <script src="libs/jquery/jquery-2.1.1.min.js" charset="utf-8"></script>
    <script src="libs/bootstrap/js/bootstrap.min.js" charset="utf-8"></script>
    <script src="libs/queue.min.js"></script>

    <!--Stylesheets-->
    <link rel="stylesheet" type="text/css" href="libs/bootstrap/css/bootstrap.min.css">

    <!-- Get some nice font-->
    <!--<link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700' rel='stylesheet' type='text/css'>-->

    <!-- vis classes-->
    <script src = "js/multiline.js"></script>
    <script src = "js/datawrangling.js"></script>
    <script src = "js/stackedbar.js"></script>
    <script src = "js/sankey.js"></script>
    <script src = "js/sankeyvis.js"></script>
    <!-- <script src="http://d3js.org/queue.v1.min.js"></script> -->
    <script src="libs/FileSaver.js"></script>

    <!-- stylesheet-->
    <link rel="stylesheet" type="text/css" href="css/myStyle.css">



<!-- 
Sprint Template 
http://www.templatemo.com/preview/templatemo_401_sprint 
-->
    <meta name="viewport" content="width=device-width">

    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/normalize.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/templatemo_misc.css">
    <link rel="stylesheet" href="css/templatemo_style.css">

    <script src="js/vendor/modernizr-2.6.2.min.js"></script>

</head>
<body>
    <!--[if lt IE 7]>
    <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->
    <div id="front">
        <div class="site-header">
            <div class="container">
                <div class="row">
                    <div class="col-md-4 col-sm-6 col-xs-6">
                        <div id="templatemo_logo">
                            <h1><a href="#"></a></h1>
                        </div> <!-- /.logo -->
                    </div> <!-- /.col-md-4 -->
                    <div class="col-md-8 col-sm-6 col-xs-6">
                        <a href="#" class="toggle-menu"><i class="fa fa-bars"></i></a>
                        <div class="main-menu">
                            <ul>
                                <li><a href="#front">Home</a></li>
                                <li><a href="#tutorial">Tutorial</a></li>
                                <li><a href="#reservoirs">Reservoirs</a></li>
                                <li><a href="#withdrawals">Withdrawals</a></li>
                            </ul>
                        </div> <!-- /.main-menu -->
                    </div> <!-- /.col-md-8 -->
                </div> <!-- /.row -->
                <div class="row">
                    <div class="col-md-12">
                        <div class="responsive">
                            <div class="main-menu">
                                <ul>
                                    <li><a href="#front">Home</a></li>
                                    <li><a href="#tutorial">Tutorial</a></li>
                                    <li><a href="#reservoirs">Reservoirs</a></li>
                                    <li><a href="#withdrawals">Withdrawals</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- /.container -->
        </div> <!-- /.site-header -->
    </div> <!-- /#front -->

    <div class="site-slider">
        <ul class="bxslider">
            <li>
                <img src="images/slider/slide1.jpg" alt="slider image 1">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12 text-right">
                            <div class="slider-caption">
                                <h4>&nbsp;BUT THE DROUGHT CAME BACK? THE VERY NEXT YEAR!&nbsp;</h4>
                                <h5>&nbsp;Ben Steineman &amp; Shiuh-Wuu (Victor) Liu | Harvard University | CS 171 | Spring 2015&nbsp;</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            <li>
                <img src="images/slider/slide2.jpg" alt="slider image 2">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12 text-right">
                            <div class="slider-caption">
                                <h4>&nbsp;Enterprise Bridge near Lake Oroville, the 2nd largest reservoir in California&nbsp;</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            <li>
                <img src="images/slider/slide3.jpg" alt="slider image 3">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12 text-right">
                            <div class="slider-caption">
                                <h4>&nbsp;Once open water shrinks down into increasingly tighter channels at the Bidwell Marina&nbsp;</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            <li>
                <img src="images/slider/slide4.jpg" alt="slider image 4">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12 text-right">
                            <div class="slider-caption">
                                <h4>&nbsp;U.S. Drought Monitor archived maps show worsening drought conditions&nbsp;</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            <li>
                <img src="images/slider/slide5.jpg" alt="slider image 5">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12 text-right">
                            <div class="slider-caption">
                                <h4>&nbsp;Governor of California, Jerry Brown, announces mandatory water usage reductions&nbsp;</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
        </ul> <!-- /.bxslider -->
        <div class="bx-thumbnail-wrapper">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div id="bx-pager">
                            <a data-slide-index="0" href=""><img src="images/slider/thumb1.jpg" alt="image 1" /></a>
                            <a data-slide-index="1" href=""><img src="images/slider/thumb2.jpg" alt="image 2" /></a>
                            <a data-slide-index="2" href=""><img src="images/slider/thumb3.jpg" alt="image 3" /></a>
                            <a data-slide-index="3" href=""><img src="images/slider/thumb4.jpg" alt="image 4" /></a>
                            <a data-slide-index="4" href=""><img src="images/slider/thumb5.jpg" alt="image 5" /></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- /.site-slider -->

    <div id="tutorial" class="content-section">
        <div class="container">
            <div class="row">
                <div class="col-md-12 text-center">
                    <h1 class="section-title">Tutorial</h1>
                </div> <!-- /.col-md-12 -->
                <center><iframe width="560" height="315" src="https://www.youtube.com/embed/k8HFoFk3BLk" frameborder="0" allowfullscreen></iframe></center>
            </div> <!-- /.row -->
        </div> <!-- /.container -->
    </div> <!-- /#tutorial -->


    <div id="reservoirs" class="content-section">
        <div class="container">
            <div class="row">
                <div class="col-md-12 text-center">
                    <h1 class="section-title">Reservoirs</h1>
                </div> <!-- /.col-md-12 -->
            </div> <!-- /.row -->
            <div class="row">
                <div class="col-md-4 col-lg-4 col-sm-4" id="stackedbarVis">
                <h3>California Reservoir<br>Levels vs Capacity</h3>
                </div>
                
                <div class="col-md-8 col-lg-8 col-sm-8" id="multiLineVis">
                <h3>Reservoir Utilization<br>Over Time</h3>
                </div>
            </div> <!-- /.row -->
        </div> <!-- /.container -->
    </div> <!-- /#reservoirs -->

    <div id="withdrawals" class="content-section">
        <div class="container">
            <div class="row">
                <div class="col-md-12 text-center">
                    <h1 class="section-title">Withdrawals</h1>
                </div> <!-- /.col-md-12 -->
            </div> <!-- /.row -->
            <div class="row">
                <h3>2010 California Water Withdrawal<br>Sankey Diagram</h3>
                <div class="col-md-12 col-lg-12 col-sm-12" id="sankeyVis"></div>
            </div> <!-- /.row -->
        </div> <!-- /.container -->
    </div> <!-- /#reservoirs -->

    <div class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-sm-6">
                    <span>
                    	Copyright &copy; 2015 <a href="http://www.harvard.edu/">Harvard University</a> | <a href="http://www.cs171.org/">CS171.org</a> | <a href="
https://www.linkedin.com/in/bsteineman">Ben Steineman</a> &amp; <a href="
https://www.linkedin.com/in/swliu">Shiuh-Wuu (Victor) Liu</a><br>

Images from <a href="http://www.wired.com/2015/02/lack-rain-one-stories-behind-wests-inevitable-2015-drought/">Wired</a>, <a href="http://www.nbcnews.com/storyline/california-drought/california-drought-crisis-takes-toll-lake-oroville-n185001
">NBC News</a>, <a href="http://www.dailymail.co.uk/news/article-2731091/California-s-vanishing-lakes-Before-photos-reveal-shocking-shriveling-effect-state-s-devastating-drought-decades.html">Daily Mail</a>, <a href="http://droughtmonitor.unl.edu/MapsAndData/MapArchive.aspx">USDM</a>, <a href="http://droughtmonitor.unl.edu/MapsAndData/MapArchive.aspx">Huffington Post</a>, <a href="http://www.cnn.com/2015/04/08/opinions/sobel-california-drought/">CNN</a><br>

Raw data obtained from <a href="http://cida.usgs.gov/ca_drought/">USGS</a> | Original template by <a href="http://www.templatemo.com">templatemo</a>


                </div> <!-- /.col-md-6 -->
                <div class="col-md-6 col-sm-6">
                    <ul class="social">
                        <br><br><a href="Process_Book_Steineman_Liu.pdf">Process Book PDF</a> | <a href="proposal_Steineman_Liu.pdf">Proposal PDF</a>
<!--                         <li><a href="#" class="fa fa-facebook"></a></li>
                        <li><a href="#" class="fa fa-twitter"></a></li>
                        <li><a href="#" class="fa fa-instagram"></a></li>
                        <li><a href="#" class="fa fa-linkedin"></a></li>
                        <li><a href="#" class="fa fa-rss"></a></li> -->
                    </ul>
                </div> <!-- /.col-md-6 -->
            </div> <!-- /.row -->
        </div> <!-- /.container -->
    </div> <!-- /.site-footer -->

    
    <script src="js/vendor/jquery-1.10.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.1.min.js"><\/script>')</script>
    <script src="js/jquery.easing-1.3.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>
    <!-- templatemo 401 sprint -->

<script>
$(function(){ // this function is called after the HTML document is fully loaded

    // define global variables
    var allData = [];
    var resData = [];
    var metaData = {};
    var width = 1500;
    var height = 1500;

    var dateFormatter = d3.time.format("%Y%m%d"); // see: https://github.com/mbostock/d3/wiki/Time-Formatting

    var initVis = function(){    // call this function after data is loaded, reformatted and bound to the variables

        var MyEventHandler = {};
        var color = d3.scale.category20();

        MultiLineVis = new MultiLineVis(MyEventHandler,color);
        StackedBarVis = new StackedBarVis(MyEventHandler,color);
        SankeyVis = new SankeyVis();
      
        //***Data Wrangling
        Wrangling = new Wrangling();

        $(MyEventHandler).bind("barSelected", function(event, barId){
            MultiLineVis.barSelected(barId)
        });
        $(MyEventHandler).bind("dateChanged", function(event, selDate){
            var shownDate = StackedBarVis.dateChanged(selDate)
            MultiLineVis.dateChanged(shownDate);
        });
    }

    // call this function after both files are loaded -- error should be "null" if no error
    //var dataLoaded = function (error, _resData, _dicData, _usageData) {
    var dataLoaded = function (error, _resData, _usageData) {
        if (!error) {

            //***data wrangling***
            //resData = Wrangling.resDataWrang(_resData);
            //usageData = Wrangling.usageDataWrang(_usageData, _dicData)
            
            initVis();

            //multiple line chart
            resDataTop10 = MultiLineVis.PickTop10(_resData);
            MultiLineVis.createMultiLine(_resData);

            //stacked bar chart
            StackedBarVis.createStackBar(_resData);

            //sankey chart
            SankeyVis.createSankey(_usageData);
        }
    }

    var startHere = function(){

        // Hint: http://giscollective.org/d3-queue-js/
        queue()
            //.defer(d3.json, 'data/json_csv/reservoir.json') // reservoir　data
            //.defer(d3.json, 'data/storage.json') // reservoir　data
            .defer(d3.json, 'data/reservoirData_processed.json') //
            //.defer(d3.csv, 'data/json_csv/datadictionary.csv') // datadictionary data
            //.defer(d3.csv, 'data/json_csv/usco2010.csv') // usco2010 data
            .defer(d3.json, 'data/sankeyData_processed.json') //

            .await(dataLoaded) // calling function
    }

    //actually procedure starts from here
    startHere();
    
})
</script>

// Google Analytics
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62519652-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>